# Controlling the arm with MoveIt

[MoveIt](https://moveit.ros.org/) is a powerful motion planning framework for ROS supporting complex robot models and scenarios.  It's especially well-suited to manipulation problems and has been used by FARSCOPE groups in the past for driving the arm.  In particular, it will solve inverse kinematics and motion planning problems such that you can command target locations of the end effector instead of having to figure out equivalent joint angles.  Others have done hard work in developing [MoveIt support for the UR10 arm](https://github.com/ros-industrial/universal_robot/tree/melodic-devel/ur10_moveit_config) on our mobile manipulator.  _However_, any change to the URDF such as the addition of an end effector requires you to generate a [complete new MoveIt configuration package for your robot](http://docs.ros.org/en/melodic/api/moveit_tutorials/html/doc/setup_assistant/setup_assistant_tutorial.html).  I've had partial success:

* Ran the [MoveIt set-up assistant](http://docs.ros.org/en/melodic/api/moveit_tutorials/html/doc/setup_assistant/setup_assistant_tutorial.html) to generate a config package for the FARSCOPE `our_robot` model in `farscope_project_entry`.  When defining the arm move group, I had to include all the arm joints *except* the fixed one to the `ee_link`, which broke everything as it meant it wasn't a kinematic chain.
* Configured the [low-level controllers](http://docs.ros.org/en/melodic/api/moveit_tutorials/html/doc/controller_configuration/controller_configuration_tutorial.html) for our arm, editing the `action_ns` in `controllers.yaml` to be `/arm_controller/follow_joint_trajectory` to match the Gazebo interface.  I didn't bother with a GripperControl.
* Run the simulation _e.g._ `roslaunch farscope_project_entry full_simulation.launch`
* Start the move group `roslaunch farscope_robot_moveit_config move_group.launch`
* Run the test script `rosrun farscope_robot_moveit_config moveit_example.py`.  You should see the robot do a first move into a position with wrist level with shoulder, and then see the wrist move straight upwards by 20cm.
